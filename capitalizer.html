<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Favicon -->
	<link rel="icon" href="img/favicon.png" sizes="32x32">
	
	<title>Tzaru | CASER</title>
	
	<!-- INLINE STYLES
	================================================ -->
	<style>
		 body {
		     margin: 0;
		     background: #FAFAFA;
		     padding: 0;
		     font: 16px 'Roboto', sans-serif;
		     -webkit-font-smoothing: antialiased;
		     text-rendering: optimizelegibility;
		     color: #212121;
		}
		 h4 {
		     font-weight: 300;
		     font-size: 24px;
		}
		 textarea {
		     font: 14px 'Roboto', sans-serif;
		     padding: 1em;
		     resize: none;
		     border-radius: 4px;
		     border: none;
		     outline: none;
		     -webkit-transition: all .2s ease-in-out;
		     -o-transition: all .2s ease-in-out;
		     transition: all .2s ease-in-out;
		     transform: scale(0.9);
		     width: 100%;
		     margin-bottom: 2em;
		     border: 4px solid transparent;
		     background: #FAFAFA;
		}
		 textarea:focus {
		 	transform: scale(1);
		    border: 4px solid #FF80AB;
		 }
		 a {
		     text-decoration: none;
		}
		 #capitalize {
		     background: #00b7d5;
		     background-image: linear-gradient(to bottom right,#00b7d5, #ff70a3);
		     position: relative;
		     border-bottom-left-radius: 4px;
		     border-bottom-right-radius: 4px;
		     color: white;
		     padding: 4em;
		     max-width: 600px;
		     display: -webkit-box;
		     display: -ms-flexbox;
		     display: flex;
		     -webkit-box-orient: horizontal;
		     -webkit-box-direction: normal;
		     -ms-flex-flow: row wrap;
		     flex-flow: row wrap;
		     -webkit-box-pack: center;
		     -ms-flex-pack: center;
		     justify-content: center;
		     margin: 0 auto 1.4em;
		     -webkit-box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
		     box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
		}
		 .capitalize-body {
		     display: -webkit-box;
		     display: -ms-flexbox;
		     display: flex;
		     -webkit-box-orient: horizontal;
		     -webkit-box-direction: normal;
		     -ms-flex-flow: row wrap;
		     flex-flow: row wrap;
		     height: 100%;
		     -ms-flex-item-align: center;
		     align-self: center;
		     -ms-flex-pack: distribute;
		     justify-content: space-around;
		     width: 100%;
		}
		 #copyright {
		     text-align: center;
		     font-size: 11px;
		}
		 .btn {
		     padding: .7em 1em;
		     outline: none;
		     -webkit-user-select: none;
		     -moz-user-select: none;
		     -ms-user-select: none;
		     user-select: none;
		     margin-bottom: 1em;
		     border: none;
		     border-radius: 4px;
		     text-transform: uppercase;
		     margin-bottom: 1em;
		     font-weight: bold;
		     -webkit-transition: all .2s ease-in-out;
		     -o-transition: all .2s ease-in-out;
		     transition: all .2s ease-in-out;
		     cursor: pointer;
		     -webkit-box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
		     box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
		}
		 .btn:hover {
		     -webkit-box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
		     box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
		}
		 .btn-primary {
		     background: #F50057;
		     color: white;
		}
		 .btn-primary:hover {
		     background: #FF4081;
		}
		 .btn-reset, #btn-copy {
		     background: white;
		}
		 .btn-reset {
		     background: transparent;
		     -webkit-box-shadow: none;
		     box-shadow: none;
		     position: absolute;
		     top: 12px;
		     right: 14px;
		     color: white;
		     padding: 0;
		}
		 .btn-reset:hover {
		     -webkit-box-shadow: none;
		     box-shadow: none;
		     -webkit-transform: scale(1.2);
		     -ms-transform: scale(1.2);
		     transform: scale(1.2) 
		}
		 .brand:hover {
		 	 transform: scale(1.2);
		 }
		 .brand {
		     transition: all .2s ease-in-out;
		     position: absolute;
		     top: 12px;
		     left: 14px;
		     text-transform: uppercase;
		     font-weight: bold;
		     color: #FAFAFA;
		}
		 .brand img {
		 	 width: 24px;
		     padding-right: 6px;
		     transition: all .2s ease-in-out;
		}
		 #statusReport {
		     width: 100%;
		     text-align: center;
		     position: absolute;
		     bottom: 12px;
		     font-size: 12px;
		}
		@media screen and (max-width: 412px) {
			 .btn {
			 	flex-grow: .5;
			 	margin-right: 12px;
			 }
		}
	</style><!-- styles -->

	<!-- Google fonts and icons -->
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet">
</head>
<body>
	
	<!-- CAPITALIZE CONTAINER
	================================================ -->
	<div id="capitalize">
		<div class="capitalize-body">
			<a href="#" class="brand"><img src="img/logo_white.svg" alt="Logo">Caser</a>
			<textarea rows="6" cols="50" placeholder="Enter the text here..." id="sentence"></textarea>
			<p id="statusReport"></p>
			<button class="btn btn-primary" type="button">Uppercase</button>
			<button id="btn-lowercase" class="btn btn-primary" type="button">Lowercase</button>	
			<button id="btn-capitalize" class="btn btn-primary">Capitalize</button>
			<button id="btn-copy" class="btn" type="button">Copy</button>
			<button title="Refresh" class="btn btn-reset"><img src="img/ic_refresh_white_24px.svg" alt="Refresh icon"></button>
		</div><!-- .capitalize-body -->
	</div><!-- #capitalize -->


	<!-- COPYRIGHT
	================================================ -->
	<p id="copyright">CASER &copy; <span id="year"></span> Tzaru</p>

	
	<!-- JS -->
	<script>
		document.onreadystatechange = function() {
		    if (document.readyState === "interactive") {

		        (function() {
		            "use strict";

		            // DOM pointers
		            const btnPrimary = document.getElementsByClassName("btn-primary")[0];
		            const btnReset = document.getElementsByClassName("btn-reset")[0];
		            const btnCopy = document.getElementById("btn-copy");
		            const btnLowercase = document.getElementById("btn-lowercase");
		            const btnCapitalize = document.getElementById("btn-capitalize");
		            const statusReport = document.getElementById("statusReport");
		            const copyYear = document.getElementById("year");
		            let textarea = document.getElementById("sentence");


		            // Dynamic date
		            function showCurrentYear() {
		                const currentDate = new Date();
		                copyYear.innerHTML = currentDate.getFullYear();
		            }

		            // Reset all
		            function resetAll() {
		                textarea.value = null;
		                statusReport.innerHTML = null;
		            }

		            function alterCase(alterCaseFunc, str) {
		                alterCaseFunc(str);
		            }

		            // https://stackoverflow.com/questions/196972/convert-string-to-title-case-with-javascript/196991#196991
		            function capitalize(str) {
		                return str.replace(/\w\S*/g, function(txt) {
		                    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
		                });
		            }

		            // Event listeners
		            btnPrimary.addEventListener("click", _ => {
		                alterCase((str) => {
		                    const upperCaseStr = Array.from(str).map(x => x.toUpperCase());
		                    textarea.value = upperCaseStr.join("");
		                    textarea.value === "" ? statusReport.innerHTML = "Enter some text and try again." : statusReport.innerHTML = `Text is <em>uppercase.</em>`;
		                }, textarea.value);
		            });

		            btnLowercase.addEventListener("click", _ => {

		                alterCase((str) => {
		                    const lowerCaseStr = Array.from(str).map(x => x.toLowerCase());
		                    textarea.value = lowerCaseStr.join("");
		                    textarea.value === "" ? statusReport.innerHTML = "Enter some text and try again." : statusReport.innerHTML = `Text is <em>lowercase.</em>`;
		                }, textarea.value);
		            });

		            btnCapitalize.addEventListener("click", _ => {
		                textarea.value = capitalize(textarea.value);
		                textarea.value === "" ? statusReport.innerHTML = "Enter some text and try again." : statusReport.innerHTML = `Text is <em>capitalized.</em>`;
		            });

		            btnReset.addEventListener("click", resetAll);

		            // Copy textarea
		            btnCopy.addEventListener("click", event => {

		                if (textarea.value === "") {

		                    statusReport.innerHTML = "No text to copy.";
		                    return;

		                } else {

		                    textarea.select();

		                    try {
		                        document.execCommand('copy');
		                        statusReport.innerHTML = `Text <em>copied.</em>`;
		                    } catch (err) {
		                        statusReport.innerHTML = "Unable to copy.";
		                    }
		                }
		            });

		            // Invoke functions and methods
		            showCurrentYear();

		        })(); // closure ends 
		    }
		};
	</script>
	
</body>
</html>